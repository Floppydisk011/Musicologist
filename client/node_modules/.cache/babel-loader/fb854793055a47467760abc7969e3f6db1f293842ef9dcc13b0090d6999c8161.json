{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\flopp\\\\Desktop\\\\musicologist\\\\client\\\\src\\\\checkout.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport \"./checkout.css\";\nimport TextField from '@mui/material/TextField';\nimport { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport Button from '@mui/material/Button';\nimport { useParams } from 'react-router-dom';\nimport dayjs from 'dayjs';\nimport { CardElement, useElements, useStripe } from '@stripe/react-stripe-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Checkout() {\n  _s();\n  const params = useParams();\n  const type = params.type;\n  const id = params.id;\n  const stripe = useStripe();\n  const elements = useElements();\n  const handleCancel = event => {\n    event.preventDefault();\n    window.history.back();\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (!stripe || !elements) {\n      return;\n    }\n    try {\n      const {\n        token\n      } = await stripe.createToken(elements.getElement(CardElement));\n      const purchaseData = {\n        token: localStorage.getItem('token'),\n        type: type,\n        id: id,\n        paymentToken: token.id\n      };\n      fetch(\"/api/payment\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(purchaseData)\n      }).then(response => response.json()).then(data => {\n        if (data.success) {\n          alert(\"Payment successful! Thanks!\");\n          window.history.back();\n        } else {\n          alert(\"Attention: Something went wrong.\");\n          window.history.back();\n        }\n      }).catch(error => {\n        console.log(\"Error: \" + error);\n      });\n    } catch (error) {\n      console.error(\"Errore durante la creazione del token di pagamento:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"checkoutPage\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"checkOut\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        id: \"paytitle\",\n        children: \"Check-out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payContent\",\n        children: /*#__PURE__*/_jsxDEV(CardElement, {\n          options: {\n            style: {\n              base: {\n                fontSize: '16px',\n                color: '#424770',\n                '::placeholder': {\n                  color: '#aab7c4'\n                }\n              },\n              invalid: {\n                color: '#9e2146'\n              }\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payementActions\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"accept\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            id: \"acc\",\n            variant: \"contained\",\n            onClick: handleSubmit,\n            children: \"Proceed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"deny\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            id: \"den\",\n            variant: \"outlined\",\n            onClick: handleCancel,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s(Checkout, \"6i17EFKmpa2yFdN7QDxAb2/lGG4=\", false, function () {\n  return [useParams, useStripe, useElements];\n});\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["React","useState","TextField","AdapterDayjs","LocalizationProvider","DatePicker","Button","useParams","dayjs","CardElement","useElements","useStripe","jsxDEV","_jsxDEV","Checkout","_s","params","type","id","stripe","elements","handleCancel","event","preventDefault","window","history","back","handleSubmit","token","createToken","getElement","purchaseData","localStorage","getItem","paymentToken","fetch","method","headers","body","JSON","stringify","then","response","json","data","success","alert","catch","error","console","log","className","children","fileName","_jsxFileName","lineNumber","columnNumber","options","style","base","fontSize","color","invalid","variant","onClick","_c","$RefreshReg$"],"sources":["C:/Users/flopp/Desktop/musicologist/client/src/checkout.js"],"sourcesContent":[" \n\nimport React, { useState } from 'react';\nimport \"./checkout.css\";\nimport TextField from '@mui/material/TextField';\nimport { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport Button from '@mui/material/Button';\nimport { useParams } from 'react-router-dom';\nimport dayjs from 'dayjs';\nimport { CardElement, useElements, useStripe } from '@stripe/react-stripe-js';\n\nfunction Checkout() {\n  const params = useParams();\n  const type = params.type;\n  const id = params.id;\n\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const handleCancel = (event) => {\n    event.preventDefault();\n    window.history.back();\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    if (!stripe || !elements) {\n      return;\n    }\n\n    try {\n      const { token } = await stripe.createToken(elements.getElement(CardElement));\n      const purchaseData = {\n        token: localStorage.getItem('token'),\n        type: type,\n        id: id,\n        paymentToken: token.id, \n      };\n\n      fetch(\"/api/payment\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(purchaseData),\n      })\n        .then((response) => response.json())\n        .then((data) => {\n          if (data.success) {\n            alert(\"Payment successful! Thanks!\");\n            window.history.back();\n          } else {\n            alert(\"Attention: Something went wrong.\");\n            window.history.back();\n          }\n        })\n        .catch((error) => {\n          console.log(\"Error: \" + error);\n        });\n    } catch (error) {\n      console.error(\"Errore durante la creazione del token di pagamento:\", error);\n    }\n  };\n\n  return (\n    <div className=\"checkoutPage\">\n      <div className=\"checkOut\">\n        <h1 id=\"paytitle\">Check-out</h1>\n        <div className=\"payContent\">\n            <CardElement \n              options={{\n                style: {\n                  base: {\n                    fontSize: '16px',\n                    color: '#424770',\n                    '::placeholder': {\n                      color: '#aab7c4',\n                    },\n                  },\n                  invalid: {\n                    color: '#9e2146',\n                  },\n                },\n              }}\n          />\n        </div>\n        <div className=\"payementActions\">\n          <div className=\"accept\">\n            <Button id=\"acc\" variant=\"contained\" onClick={handleSubmit}>Proceed</Button>\n          </div>\n          <div className=\"deny\">\n            <Button id=\"den\" variant=\"outlined\" onClick={handleCancel}>Cancel</Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Checkout;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}